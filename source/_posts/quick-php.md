---
title: quick-php
date: 2019-01-08 14:48:48
categories: 
          - quick
tags: 
    - php
    - mysql
    - tp5
---
PHP | 数据库 | MYSQLI扩展 | GD操作 (画图) | PDO (操作数据库) 
 SMARTY (模板技术) | MVC (编程方式) | TP5框架开发
<!-- more -->
# PHP

## 九大超全局预定义数组变量

包括以下九个成员：

> **$_ENV**                           **$_SERVER**
>
> ​			以下三个将会在表单传值部分进行讲解
>
> **$_GET**                            **$_POST**                              **$_REQUEST**
>
> ​			以下两个将会在会话技术部分进行将爱那个接
>
> **$_COOKIE**                     **$_SESSION**
>
> ​			下面这个将会在文件上传部分进行讲解
>
> **$_FILES**
>
> ​			下面这个将会在作用域部分进行讲解
>
> **$GLOBALS**



| 九大超全局预定义数组变量 | 用法                                                         |
| ------------------------ | ------------------------------------------------------------ |
| **$_ENV**                | 获得程序所部署的环境相关信息。                               |
| **$_SERVER**             | 服务器和执行环境信息                                         |
| **$_GET**                | $_GET 被广泛应用于收集表单数据，在HTML form标签的指定该属性："method="get"。 |
| **$_POST**               | $_POST 被广泛应用于收集表单数据，在HTML form标签的指定该属性："method="post"。 |
| **$_REQUEST**            | 用于收集HTML表单提交的数据。                                 |
| **$_COOKIE**             | $_COOKIE 变量用于取回 cookie 的值。                          |
| **$_SESSION**            | 存储和取回 session 变量                                      |
| **$_FILES**              | 通过使用 $_FILES，可以从客户计算机向远程服务器上传文件。     |
| **$GLOBALS**             | 引用全局作用域中可用的全部变量                               |



## 魔术常量

| 名称                  | 说明                                                         |
| --------------------- | ------------------------------------------------------------ |
| **\_\_LINE\_\_**      | 文件中的当前行号。                                           |
| **\_\_FILE\_\_**      | 文件的完整路径和文件名。如果用在被包含文件中，则返回被包含的文件名。 |
| **\_\_DIR\_\_**       | 文件所在的目录。如果用在被包括文件中，则返回被包括的文件所在的目录。 |
| **\_\_FUNCTION\_\_**  | 函数名称                                                     |
| **\_\_CLASS\_\_**     | 类的名称                                                     |
| **\_\_TRAIT\_\_**     | Trait 的名字                                                 |
| **\_\_METHOD\_\_**    | 类的方法名                                                   |
| **\_\_NAMESPACE\_\_** | 当前命名空间的名称（区分大小写）。                           |

魔术常量本质上==不能算==是严格意义上的==常量==，常量在脚本代码中是不允许被修改的，也就是值是固定的，但是魔术常量会随着在脚本代码中位置的变换，其值也会发生改变。



## 魔术方法

PHP 将所有以 __（两个下划线）开头的类方法保留为魔术方法。所以在定义类方法时，除了上述魔术方法，建议不要以 __ 为前缀。 

| 魔术方法           | 触发条件                                                     |
| ------------------ | ------------------------------------------------------------ |
| **__construct()**  | **实例化**一个对象后 (new) ；构造函数                        |
| **__clone()**      | 使用clone**克隆**一个对象时                                  |
| **__destruct()**   | 在**销毁**一个类之前执行 ；析构函数                          |
| **__call()**       | **调用**一个不可访问**方法**时                               |
| **__callStatic()** | **调用**静态方式中调用一个不可访问**方法**时                 |
| **__get()**        | **获取**一个不可访问的**非静态**成员属性的值时               |
| **__set()**        | **设置**（添加或者修改）一个不可访问的**非静态**成员属性的值时 |
| **__unset()**      | **删除**一个不可访问的**非静态**成员属性时                   |
| **__isset()**      | 当使用isset函数**判断**一个不可访问的成员属性是否存在时      |
| **__sleep()**      | 执行**serialize**()（**对象序列化**）时，先会调用这个函数 。此功能可以用于清理对象 |
| **__wakeup()**     | 执行**unserialize**()（**将对象进行反序列化**）时，先会调用这个函数。 |



## 文件包含的四种方式

1）include；2）include_once；3）require；4）require_once；

四种方式包括：

> **include**：引入文件，如果引入文件时**存在错误**，**程序不会中断**，而**会继续执行**，并报一个**警告错误**；
>
> **include_once**：与include相同，但是include_once会检查被引入的文件**之前是否已经引入**，如果引进引入则不会再次引入；
>
> **require**：引入文件，如果引入文件时**存在错误**，则**程序中断执行**，并显示**致命错误**；
>
> **require_once**：与require相同，但是require_once会检查被引入的文件**之前是否已经引入**，如果引进引入则不会再次引入；



## 函数

### 类型转换函数

| 函数                  | 用法                 | 语法                                                         |
| --------------------- | -------------------- | ------------------------------------------------------------ |
| **intval( `var` )**   | 获取变量的整数值     | intval (mixed $var [, int $base = 10 ] )  base 转换进制，返回变量 var 的 int 数值。 |
| **boolval( `var` )**  | 获取变量的布尔值     | boolval ( mixed $var )    返回var变量的布尔值。              |
| **floatval( `var` )** | 获取变量的浮点值     | floatval ( mixed $var )   返回变量 var 的 float 数值。       |
| **strval( `var` )**   | 获取变量的字符串值。 | strval ( mixed $var )  返回 var 的 string 值。var 可以是任何标量类型。 |
| **settype()**         | 设置变量的类型       | bool settype ( mixed &$var , string $type )                  |

**函数详情：**

> **settype** ( `var`, `type` )
>
> > **参数：**
> >
> > - `var`
> >
> >   要转换的变量。
> >
> > - `type`
> >
> >    type 的可能值为：
> >
> >   - "boolean"      "integer"    "float"
> >   - "string"    "array"    "object"    "null"
> >
> > **返回值：**
> >
> >    成功时返回 **TRUE**， 或者在失败时返回 **FALSE**。 



### 类型判断相关函数

涉及的函数：

> gettype( `var` )    获取数据的数据类型
>
> is_numeric( `var` )     判断是否是一个数值
>
> is_int( `var` )    判断是否是一个整型值	
>
> is_bool( `var` )    判断是否是一个布尔型值
>
> is_float( `var` )    判断是否是一个浮点型值
>
> is_string(`var`)    判断是否是一个字符串型值
>
> is_array(`var`)    判断是否是一个数组型值
>
> is_object( `var` )    判断是否是一个对象型值
>
> is_resource( `var` )    判断是否是一个资源型值
>
> is_null( `var` )    判断是否是一个null类型值



### 进制转换相关函数

**bin**：binary二进制          **dec**：decimal十进制          **oct**：octal八进制         **hex**：hexdecimal十六进制

| 函数                      | 作用                                       |
| ------------------------- | ------------------------------------------ |
| **abs**( `var` )          | 取一个数值的绝对值                         |
| **bindec**( `var` )       | 二进制转十进制                             |
| **octdec**( `var` )       | 八进制转十进制                             |
| **hexdec**( `var` )       | 十六进制转十进制                           |
| **decbin**( `var` )       | 十进制转二进制                             |
| **decoct**( `var` )       | 十进制转八进制                             |
| **dechex**( `var` )       | 十进制转十六进制                           |
| **base_convert**( `var` ) | n进制转m进制（取值范围是2到36，包括2和36） |



### 字符串函数（ String函数）

#### 字符串—数组 转换

| 函数            | 描述                                   |
| --------------- | -------------------------------------- |
| **implode**()   | 把数组粘合成一个字符串。返回值：字符串 |
| **explode**()   | 把字符串打散为数组                     |
| **str_split**() | 把字符串一个个(或自定义)分割到数组中。 |

**函数详情：**

> **implode** ( `[glue]` , `pieces` )
>
> > 参数：
> >
> > - `glue`
> >
> >   默认为空的字符串。   
> >
> > - `pieces`
> >
> >   想要转换的数组。 
>
> 
>
> **explode **( `delimiter`  , `string`   , `[limit]` )
>
> > 参数：
> >
> > - `delimiter`
> >
> >   边界上的分隔字符。    
> >
> > - `string`
> >
> >   进行操作的字符串。 
> >
> > - `limit`
> >
> >   - 如果设置了此参数并且是正数，则返回的数组包含最多limit个元素，而最后那个元素将包含string的剩余部分。
> >   - 如果limit参数是负数，则返回除了最后的   -limit   个元素外的所有元素。
> >   - 如果 limit 是 0，则会被当做 1。 
>
>  
>
> **str_split** ( `string`  , `[split_length]` )
>
> > 参数：
> >
> > - `string`
> >
> >   进行操作的字符串。
> >
> > - `split_length`
> >
> >   每一段的长度。



#### 除空白函数

| 函数        | 描述                                 |
| ----------- | ------------------------------------ |
| **trim**()  | 移除字符串两侧的空白字符和其他字符。 |
| **ltrim**() | 移除字符串左侧的空白字符或其他字符。 |
| **rtrim**() | 移除字符串右侧的空白字符或其他字符。 |

**函数详情：**

> **trim** ( `str` ，`[character_mask]` )
>
> **ltrim** ( `str` ，`[character_mask]` )
>
> **rtrim** ( `str` ，`[character_mask]` )
>
> > 参数：
> >
> > - `string`
> >
> >   进行操作的字符串。
> >
> > - `character_mask`
> >
> >   可选参数，过滤字符也可由 character_mask 参数指定。默认" \t\n\r\0\x0B"
> >
> >   - " "         普通空格符。      
> >   - "\t"        制表符。
> >   - "\n"        换行符。      
> >   - "\r"        回车符。
> >   - "\0"        空字节符。      
> >   - "\x0B"   垂直制表符。      



#### 截取函数

| 函数         | 描述                                                       |
| ------------ | ---------------------------------------------------------- |
| **substr**() | 用于截知道位置 从哪到哪截                                  |
| **strstr**() | 查找字符串在另一字符串中的第一次出现  false往后截 true往前 |

**函数详情：**

> **substr **( `string` , `start` , `length ` )
>
> > 参数：
> >
> > - `string`
> >
> >   进行操作的字符串。
> >
> > - `start`
> >
> >   - 如果是非负数,返回的字符串将从string的start位置开始,从 0 开始计算。
> >   - 如果是负数,返回的字符串将从 string 结尾处向前数第start个字符开始。
> >   - 如果string的长度小于start,将返回 FALSE。 
> >
> > - `length `
> >
> >   - 如果是正数的length,返回的字符串将从start处开始最多包括length个字符。 
> >   - 如果是负数的length,那么string末尾处的length个字符将会被省略。如果 start 不在这段文本中，那么将返回 FALSE。
> >   - 如果提供了值为 0，FALSE 或 NULL 的 length，那么将返回一个空字符串
> >   - 如果没有提供 length，返回的子字符串将从 start 位置开始直到字符串结尾。
>
> 
>
> **strstr**    ( `haystack`   , `needle` , `before_needle` )
>
> > 参数：
> >
> > - `haystack`
> >
> >   输入字符串。 
> >
> > - `needle`
> >
> >   如果needle不是一个字符串,那么它将被转化为整型并且作为字符的序号来使用。
> >
> > - `before_needle`
> >
> >   若为 TRUE，strstr() 将返回 needle 在 haystack 中的位置之前的部分。



#### 大小写转换函数

| 函数                       | 描述                         |
| -------------------------- | ---------------------------- |
| **strtolower**( `string` ) | 把字符串全部转换为小写字母。 |
| **strtoupper**( `string` ) | 把字符串全部转换为大写字母。 |
| **ucfirst**( `string` )    | 把字符串中的首字符转换为大写 |



#### 查找函数

| 函数          | 描述                                        |
| ------------- | ------------------------------------------- |
| **strpos**()  | 返回字符串第一次出现的位置 。返回位置值     |
| **strrpos**() | 返回字符串倒数第一次出现的位置 。返回位置值 |

**函数详情：**

> **strpos** ( `haystack` , `needle` , `offset` )
>
> > 参数：
> >
> > - `haystack`
> >
> >   在该字符串中进行查找。 
> >
> > - `needle`
> >
> >   如果 needle 不是一个字符串，那么它将被转换为整型并被视为字符的顺序值。
> >
> > - `offset` 
> >
> >   如果提供了此参数，搜索会从字符串该字符数的起始位置开始统计。       如果是负数，搜索会从字符串结尾指定字符数开始。
>
>  
>
> **strrpos** ( `haystack` , `needle` , `offset` )
>
> > 参数：
> >
> > - `haystack`
> >
> >   在该字符串中进行查找。 
> >
> > - `needle`
> >
> >   如果 needle 不是一个字符串，那么它将被转换为整型并被视为字符的顺序值。
> >
> > - `offset` 
> >
> >   如果提供了此参数，搜索会从字符串该字符数的起始位置开始统计。       如果是负数，搜索会从字符串结尾指定字符数开始。



#### 替换函数

| 函数              | 描述                   |
| ----------------- | ---------------------- |
| **str_replace**() | 替换字符串中的一些字符 |

**函数详情：**

> **str_replace** ( `search` , `replace` , `subject` , `[count]` )
>
> > 参数：
> >
> > - `search`
> >
> >   替换的目标值，也就是 needle。一个数组可以指定多个目标。 
> >
> > - `replace`
> >
> >   search 的替换值。一个数组可以被用来指定多重替换。
> >
> > - `subject` 
> >
> >   进行替换的数组或者字符串。
> >
> >   如果 subject 是一个数组，替换操作将遍历整个 subject，返回值也将是一个数组。 
> >
> > -  `count`
> >
> >   如果被指定，它的值将被设置为替换发生的次数。 



#### 格式化函数

| 函数          | 描述                             |
| ------------- | -------------------------------- |
| **printf**()  | 输出格式化的字符串。             |
| **sprintf**() | 把格式化的字符串写入一个变量中。 |

#### 常用输出函数

| 函数           | 描述                                                         |
| -------------- | ------------------------------------------------------------ |
| **echo**()     | 只能以字符串的形式输出内容。通常适合输出字符串或整型浮点数据 |
| **print_r**()  | 适用于除布尔型 资源型 null外其他类型                         |
| **var_dump**() | 既能输出数据的值，又能够输出数据得知所属的数据类型           |

#### 其他

| 函数                     | 描述                                         |
| ------------------------ | -------------------------------------------- |
| **str_repeat**()         | 把字符串重复指定的次数。                     |
| **str_shuffle**( `str` ) | 随机地打乱字符串中的所有字符。               |
| **addslashes**( `str` )  | 防御。返回在预定义字符前添加反斜杠的字符串。 |
| **htmlspecialchars**()   | 防御。把一些预定义的字符转换为 HTML 实体。   |

 **函数详情：**

> **str_repeat** ( `input` , `multiplier ` )
>
> > 参数：
> >
> > - `input`
> >
> >   待操作的字符串。 
> >
> > - `multiplier `
> >
> >   input 被重复的次数。 
> >
> >   必须>= 0。如果为 0，函数返回空字符串。 
>
> 
>
> **htmlspecialchars**    ( `string`   [,  `flags`    [,  `encoding`   [,  `double_encode` ]]] )
>
> > 参数：
> >
> > - `string`
> >
> >   带转换的字符。 



### 数组函数(Array)

涉及的函数：

> 1）排序函数
>
> ​	 sort(), asort(), rsort(), arsort(), ksort(), krsort(), shuffle()
>
> 2）元素指针函数
>
> ​	 current(), key(), next(), end(), prev(), reset(), each()
>
> 3）其他函数
>
> ​	 count(), array_push(), array_pop(), array_reverse(), in_array(), 
>
> ​	 array_keys(), array_values(), list()，array_merge(),range()



#### 排序函数

| 函数                                 | 描述                                            |
| ------------------------------------ | ----------------------------------------------- |
| **sort**( `array` , `sort_flags` )   | 对数值数组进行升序排序。 重新规划元素的下标     |
| **asort**( `array` , `sort_flags` )  | 对数值数组进行升序排序。 持元素的原下标不变     |
| **rsort**( `array` , `sort_flags` )  | 对数值数组进行降序排序。 重新规划元素的下标     |
| **arsort**( `array` , `sort_flags` ) | 对数值数组进行降序排序。 持元素的原下标不变     |
| **ksort**( `array` , `sort_flags` )  | 对关联数组按照键名升序排序。                    |
| **krsort**( `array` , `sort_flags` ) | 对关联数组按照键名降序排序。                    |
| **shuffle**( `array` )               | 把数组中的元素按随机重新排列。 重新规划元素下标 |

**函数详情：**

> **sort** ( `array` , `sort_flags` )
>
> > 参数：
> >
> > - `array`
> >
> >   必需。规定要进行排序的数组。
> >
> > - `sort_flags` 
> >
> >   可选。规定如何排列数组的元素/项目。可能的值：
> >
> >   - 0 = SORT_REGULAR - 默认。把每一项按常规顺序排列（Standard ASCII，不改变类型）。
> >   - 1 = SORT_NUMERIC - 把每一项作为数字来处理。
> >   - 2 = SORT_STRING - 把每一项作为字符串来处理。
> >   - 3 = SORT_LOCALE_STRING - 把每一项作为字符串来处理，基于当前区域设置（可通过 [setlocale()](https://www.w3cschool.cn/php/func-string-setlocale.html) 进行更改）。
> >   - 4 = SORT_NATURAL - 把每一项作为字符串来处理，使用类似 [natsort()](https://www.w3cschool.cn/php/func-array-natsort.html) 的自然排序。
> >   - 5 = SORT_FLAG_CASE - 可以结合（按位或）SORT_STRING 或 SORT_NATURAL 对字符串进行排序，不区分大小写。
>



#### 元素指针函数

| 函数                    | 描述                                     |
| ----------------------- | ---------------------------------------- |
| **current** ( `array` ) | 获取当前元素指针所在位置上的元素的值     |
| **key** ( `array` )     | 获取当前元素指针所在位置上的元素键(下标) |
| **next** ( `array` )    | 将数组中的内部指针向右移动一位。         |
| **end** ( `array `)     | 将数组的内部指针指向最后一个元素。       |
| **prev** ( `array `)    | 将数组的内部指针向左倒回一位。           |
| **reset** ( `array `)   | 将数组的内部指针指向第一个元素。         |
| **each** ( `array `)    | 返回数组中当前的元素组成新的数组。       |



#### 操作元素

| 函数                     | 描述                                                         |
| ------------------------ | ------------------------------------------------------------ |
| **array_push**()         | 添加新元素的(只能在末尾添加值) 。返回新数组的元素个数 。(增) |
| **array_unshift** ()     | 在数组开头插入一个或多个元素。  返回新数组中元素的个数。 (增) |
| **array_pop**( `arr` )   | 删除指定数组中最后一个元素。数组的最后一个值 (删)            |
| **array_shift**( `arr` ) | 删除数组中的第一个元素 。 返回被删除元素的值(删)             |
| **array_reverse**()      | 将元素的顺序颠倒。索引下标重新规划下标，字符串下标不变(改)   |
| **array_merge**()        | 将两个数组合并。索引下标重新规划下标，字符串下标不变(改)     |
| **array_flip**( `arr` )  | 数组中的值与键名互换（如果有重复前面的会被后面的覆盖）(改)   |
| **in_array**()           | 函数搜索数组中是否存在指定的值。返回布尔。(查)               |
| **array_search**()       | 在数组中搜索给定的值，如果成功则返回相应的键名。(查)         |
| **array_key_exists**()   | 检查指定的键名是否存在于数组中。返回布尔。(查)               |
| **isset**()              | 检索给定的键名是否存在数组中。返回布尔。(查)                 |

**函数详情：**

> **array_push** ( `array` ,  `value1` , `[value2...]` )
>
> > 参数：
> >
> > - `array`
> >
> >   输入的数组。 
> >
> > -  `value1` 
> >
> > ​         要压入 array 末尾的第一个值。 
>
> 
>
> **array_unshift** ( `array`   , `value1` , `[value2...]` )
>
> > 参数：
> >
> > - `array`
> >
> >   输入的数组。 
> >
> > -  `value1` 
> >
> > ​          开头插入的变量。 
>
> 
>
> **array_reverse**  (  `array` , `[preserve_keys]`)
>
> > 参数：
> >
> > - `array`
> >
> >   输入的数组。 
> >
> > - `preserve_keys`
> >
> >   如果设置为 **TRUE** 会保留数字的键。       
> >
> >   非数字的键则不受这个设置的影响，总是会被保留。 
>
> 
>
> **array_merge** ( `array1` , `[array2...]` )
>
> > 参数：
> >
> > - `array1`
> >
> >   要合并的第一个数组。
> >
> > -  `array...`
> >
> >   要合并的其他数组。 
>
> 
>
> **in_array** ( `needle` ,  `haystack` , `strict` )
>
> > 参数：
> >
> > - `needle`
> >
> >   待搜索的值。 
> >
> > -  `haystack`
> >
> >   此数组。
> >
> > - `strict`
> >
> >   如果第三个参数 strict 的值为**TRUE** 则 in_array() 函数还会检查 **needle**的类型是否和**haystack**中的相同。 
>
> 
>
> **array_search** ( `needle` ,  `haystack` , `strict` )
>
> > 参数：
> >
> > - `needle`
> >
> >   待搜索的值。 
> >
> > -  `haystack`
> >
> >   此数组。
> >
> > - `strict`
> >
> >   如果可选的第三个参数 strict 为 **TRUE**，则**array_search()** 将在**haystack**      中检查完全相同的元素。这意味着同样严格比较**haystack**里**needle**的类型，并且对象需是同一个实例。  
>
> 
>
> **array_key_exists** ( `key` ,  `array` )
>
> > 参数：
> >
> > - `key`
> >
> >   要检查的键。 
> >
> > - `array`
> >
> >   一个数组，包含待检查的键。 
>
> 
>
> **isset** ( `var1` , `[var2...]` )
>
> > 参数：
> >
> > - `var`
> >
> >   要检查的变量。 
> >
> > - `var...`
> >
> >   其他变量。 



#### 提取信息

| 函数                         | 描述                                               |
| ---------------------------- | -------------------------------------------------- |
| **count**()                  | 获取数组元素的总个数                               |
| **array_keys**()             | 提取下标形成新的数组。已知数组的值 返回坐标        |
| **array_values**( `arr` )    | 提取数组的所有元素的值形成新的数组。重新规划下标   |
| **max**( `var1` , `var2`...) | 返回一个数组中的最大值，或者几个指定值中的最大值。 |
| **min**( `var1` , `var2`...) | 返回一个数组中的最小值，或者几个指定值中的最小值。 |

**函数详情：**

> **count** ( `array_or_countable`  , `[mode]`  )
>
> > 参数：
> >
> > - `array_or_countable`
> >
> >   数组或者**Countable**对象。 
> >
> > - `mode`
> >
> >   如果可选的 mode 参数设为1,count() 将递归地对数组计数。对计算多维数组的所有单元尤其有用。 
>
> 
>
> **array_keys** ( `array` , `[search_value]` , `[strict]` )
>
> > 参数：
> >
> > - `array`
> >
> >   必需。规定数组。 
> >
> > - `search_value`
> >
> >   可选。为查找的值。如果没指定这个参数，返回数组的所有键。
> >
> > - `strict` 
> >
> >   可选。与 value 参数一起使用。可能的值：
> >
> >   - true - 返回带有指定键值的键名。依赖类型，数字 5 与字符串 "5" 是不同的。
> >   - false - 默认值。不依赖类型，数字 5 与字符串 "5" 是相同的。



#### 数组和变量转换

| 函数                        | 描述                                                         |
| --------------------------- | ------------------------------------------------------------ |
| **extract**($arr)           | 把元素转换成变量导入到当前的符号表 ，键名当变量名，值作为变量值 |
| **compact**(var1,var2,var3) | 创建一个包含变量名和它们的值的数组。                         |

**函数详情：**

> **extract** ( `array` , `[flags]` , `[prefix]` )
>
> > 参数：
> >
> > - `array`
> >
> >   必需。规定要使用的数组。 
> >
> > - `flags`
> >
> >   可选。该函数将检查每个键名是否为合法的变量名，同时也检查和符号表中已存在的变量名是否冲突。对不合法和冲突的键名的处理将根据此参数决定。
> >
> >   可能的值：
> >
> >   - EXTR_OVERWRITE - 默认。如果有冲突，则覆盖已有的变量。
> >   - EXTR_SKIP - 如果有冲突，不覆盖已有的变量。
> >   - EXTR_PREFIX_SAME - 如果有冲突，在变量名前加上前缀 prefix。
> >   - EXTR_PREFIX_ALL - 给所有变量名加上前缀 prefix。
> >   - EXTR_PREFIX_INVALID - 仅在不合法或数字变量名前加上前缀 prefix。
> >   - EXTR_IF_EXISTS - 仅在当前符号表中已有同名变量时，覆盖它们的值。其它的都不处理。
> >   - EXTR_PREFIX_IF_EXISTS - 仅在当前符号表中已有同名变量时，建立附加了前缀的变量名，其它的都不处理。
> >   - EXTR_REFS - 将变量作为引用提取。导入的变量仍然引用了数组参数的值。
> >
> > - `prefix`
> >
> >   可选。如果 extract_rules 参数的值是 EXTR_PREFIX_SAME、EXTR_PREFIX_ALL、 EXTR_PREFIX_INVALID 或 EXTR_PREFIX_IF_EXISTS，则 prefix 是必需的。   
> >
> >   该参数规定了前缀。前缀和数组键名之间会自动加上一个下划线。 



#### 分段和填充

| 函数               | 描述                                                 |
| ------------------ | ---------------------------------------------------- |
| **array_slice**( ) | 将数组中的一段取出，返回数组中的选定部分。           |
| **array_splice**() | 移除选定的元素并用新元素取代。返回被移除元素的数组。 |
| **array_chunk**()  | 把一个数组分割为新的数组块。                         |
| **array_pad**()    | 将指定数量的带有指定值的元素插入到数组中。           |

**函数详情：**

> **array_slice** ( `array` , `offset` , `[length]` , `[preserve_keys]` )
>
> > 参数：
> >
> > - `array`
> >
> >   必需。规定数组。 
> >
> > - `offset`
> >
> >   必需。规定取出元素的开始位置。 从0开始，可指定负值。
> >
> > - `length`
> >
> >   可选。规定被返回数组的长度。 
> >
> >   - 如果该值设置为整数，则返回该数量的元素。
> >
> >   - 如果该值设置为负数，则函数将在举例数组末端这么远的地方终止取出。
> >   - 如果该值未设置，则返回从 start 参数设置的位置开始直到数组末端的所有元素。 
> >
> > - `preserve_keys`
> >
> >   可选。规定函数是保留键名还是重置键名。可能的值：
> >
> >   - true - 保留键名
> >
> >   - false - 默认。重置键名
>
> 
>
> **array_splice** ( `input` ,  `offset` , `[length]` , `[replacement]` )
>
> > 参数：
> >
> > - `array`
> >
> >   必需。规定数组。 
> >
> > - `offset`
> >
> >   必需。数值。规定删除元素的开始位置。 
> >
> > - `length`
> >
> >   可选。规定被移除的元素个数，也是被返回数组的长度。 
> >
> >   - 如果该值设置为正数，则移除该数量的元素。
> >   - 如果该值设置为负数，则移除从 start 到数组末端倒数 length 为止中间所有的元素。
> >   - 如果该值未设置，则移除从 start 参数设置的位置开始直到数组末端的所有元素。 
> >
> > - `replacement`
> >
> >   可选。规定带有要插入原始数组中元素的数组。如果只有一个元素，则可以设置为字符串，不需要设置为数组。 
>
> 
>
> **array_chunk** ( `array` , `size` , `[preserve_keys]` )
>
> > 参数：
> >
> > - `array`
> >
> >   必需。规定要使用的数组。 
> >
> > - `size`
> >
> > ​        必需。一个整数，规定每个新数组块包含多少个元素。 
> >
> > - `preserve_keys`
> >
> >   可选。可能的值：
> >
> >   - true - 保留原始数组中的键名。
> >   - false - 默认。每个新数组块使用从零开始的索引。
>
> 
>
> **array_pad** ( `array` , `size` , `value` )
>
> > 参数：
> >
> > - `array`
> >
> >   需要被填充的原始数组。 
> >
> > - `size`
> >
> >   新数组的长度。如果将 size 参数设置为负数，该函数会在原始数组之前插入新的元素 
> >
> > - `value`
> >
> > ​         将被填充的值，只有在 array 的现有长度小于size 的长度时才有效。 



#### 数组计算

| 函数                                              | 描述                                             |
| ------------------------------------------------- | ------------------------------------------------ |
| **array_sum**( `arr` )                            | 对数组内部的所有元素做求和运算 。非数值为0       |
| **array_product** ( `arr` )                       | 求数组中所有值的积                               |
| **array_diff**( `array1`,`array2`...);            | 比较数组，返回两个数组的差集 。（只比较键值）    |
| **array_diff_assoc**(`array1`,`array2` ...)       | 比较数组，返回两个数组的差集（比较键名和键值）   |
| **array_intersect**(`array1`,`array2` ...）       | 比较数组，返回两个数组的交集（只比较键值）。     |
| **array_intersect_assoc**(`array1`,`array2` ...） | 比较数组，返回两个数组的交集（比较键名和键值）。 |



#### 其他

| 函数                        | 描述                                                         |
| --------------------------- | ------------------------------------------------------------ |
| **list**( `var1`,`var2`...) | 把数组中的**值**赋给一些变量。 只对数组里的索引数组有效。从0起 |
| **range**()                 | 按照指定字符范围构件数组                                     |
| **array_unique**( )         | 移除数组中重复的值。 返回过滤后的数组。                      |
| **array_rand**()            | 从数组中随机选出一个或多个元素，返回键名。                   |
| **shuffle**( `array` )      | 把数组中的元素按随机顺序重新排列。                           |

**函数详情：**

> **range** ( `start` , `end` , `[step]` )
>
> > 参数
> >
> > - `start`
> >
> >   必需。规定数组元素的最小值。 
> >
> > - `end`
> >
> >   必需。规定数组元素的最大值。 
> >
> > - `step`
> >
> >   可选。规定元素之间的步进制。默认是 1。 
>
> 
>
> **array_unique** ( `array` , `sort_flags` )
>
> > 参数
> >
> > - `start`
> >
> >   必需。规定数组。 
> >
> > - `sort_flags`
> >
> >   可选。规定排序类型。可能的值：
> >
> >   - SORT_STRING - 默认。把每一项作为字符串来处理。
> >   - SORT_REGULAR - 把每一项按常规顺序排列（Standard ASCII，不改变类型）。
> >   - SORT_NUMERIC - 把每一项作为数字来处理。
> >   - SORT_LOCALE_STRING - 把每一项作为字符串来处理，基于当前区域设置（可通过setlocale() 进行更改）。
>
> 
>
> **array_rand** ( `array` , `[num]` )
>
> 参数
>
> - `start`
>
> ​        必需。规定数组。 
>
> - `num`
>
>   可选。规定返回多少个随机的元素。  



### 时间日期函数(Date/Time)

| 函数                            | 描述                                              |
| ------------------------------- | ------------------------------------------------- |
| **date()**                      | 格式化本地日期和时间。                            |
| **microtime**( `get_as_float` ) | 返回当前时间戳的微秒数。                          |
| **mktime()**                    | 返回一个日期的时间戳。                            |
| **strtotime()**                 | 将任何英文**文本**的日期或时间描述解析为 时间戳。 |
| **time**( `void` )              | 返回当前时间的时间戳。                            |

**函数详情：**

> **date** ( `format` , `timestamp` )
>
> 参数
>
> - `format`
>
>   必需。规定输出日期字符串的格式。 
>
>   | 字符               | 说明                                          | 返回值例子                                  |
>   | ------------------ | --------------------------------------------- | ------------------------------------------- |
>   | **日**             | **---**                                       | **---**                                     |
>   | d                  | 月份中的第几天，有前导零的 2 位数字           | 01 到 31                                    |
>   | D                  | 星期中的第几天，文本表示，3 个字母            | Mon 到 Sun                                  |
>   | *j*                | 月份中的第几天，没有前导零                    | 1 到 31                                     |
>   | l（"L"的小写字母） | 星期几，完整的文本格式                        | Sunday 到 Saturday                          |
>   | N                  | 格式数字表示的星期中的第几天                  | 1（表示星期一）到 7（表示星期天）           |
>   | S                  | 每月天数后面的英文后缀，2 个字符              | st，nd，rd         或者 th。可以和 j 一起用 |
>   | **月**             | **---**                                       | **---**                                     |
>   | F                  | 月份，完整的文本格式，例如 January 或者 March | January 到 December                         |
>   | m                  | 数字表示的月份，有前导零                      | 01 到 12                                    |
>   | M                  | 三个字母缩写表示的月份                        | Jan 到 Dec                                  |
>   | n                  | 数字表示的月份，没有前导零                    | 1 到 12                                     |
>   | **年**             | **---**                                       | **---**                                     |
>   | Y                  | 4 位数字完整表示的年份                        | 例如：1999 或 2003                          |
>   | **时间**           | **---**                                       | **---**                                     |
>   | A                  | 大写的上午和下午值                            | AM 或 PM                                    |
>   | h                  | 小时，12 小时格式，有前导零                   | 01 到 12                                    |
>   | H                  | 小时，24 小时格式，有前导零                   | 00 到 23                                    |
>   | i                  | 有前导零的分钟数                              | 00 到 59>                                   |
>   | s                  | 秒数，有前导零                                | 00 到 59>                                   |
>
> - `timestamp`
>
>   可选。规定一个整数的 Unix 时间戳。默认是当前的本地时间time()。 
>
> 
>
> **mktime** ( `[hour]` , `[minute]` , `[second]` , `[month]` , `[day]` , `[year]` , `[is_dst]` )
>
> 参数
>
> - `hour`
>
> - `minute`
>
> - ..........
>
> - `[is_dst]`
>
>   可选。如果时间在夏令时期间，则设置为 1，否则设置为 0，若未知则设置为 -1（默认）。
>
>   如果未知，PHP 会试图找到自己（可能产生意外的结果）。 
>
>   **注意：**该参数在 PHP 5.1.0 中被废弃。取而代之使用的是新的时区处理特性。 
>
> 
>
> **strtotime **( `time` , `[now]` )
>
> 参数
>
> - `time`
>
>   必需。规定日期/时间字符串。 
>
> - `now`
>
>   可选。规定用来计算返回值的时间戳。 



## 文件操作

### 1. 对目录操作

> 涉及的函数：
>
> **mkdir**(新目录名[,  目录权限[,  是否递归创建]])      创建一个目录（make directory）
>
> **rmdir**(目录全路径)      删除一个目录（remove directory）
>
> **rename**(旧名字,  新名字)     给目录改名或转移目录



### 2. 对文件操作

**PHP4相关文件操作**

涉及的函数：

> **fopen**(文件全路径,  打开模式)    打开一个文件
>
> **fread**(打开的文件资源,  读取内容的长度)    读取文件中的内容
>
> **fwrite**(打开的文件资源,  写入的内容)    向文件中写入内容
>
> **fclose**(打开的文件资源)    关闭打开的文件
>
> **filesize**(文件全路径)  获取文件的大小



**PHP5相关文件操作**

涉及的函数：

> **file_put_contents**(文件全路径,  写入的内容[,  写入方式])      向文件中写入内容	写入方式可指定为FILE_APPEND
>
> **file_get_contents**(文件全路径)      获得文件中的内容





# 数据库

登录：mysql -uroot -p

## 1. 数据库操作(databases)

| 操作           | 语法                          |
| -------------- | ----------------------------- |
| 显示所有数据库 | **show** databases;           |
| 创建数据库     | **create** database 数据库名; |
| 删除数据库     | **drop** database 数据库名;   |
| 选择数据库     | **use** 数据库名;             |



## 2. 数据表操作(tables)

| 操作                      | 语法                                                  |
| ------------------------- | ----------------------------------------------------- |
| 显示所有数据表            | **show tables**;                                      |
| 创建数据表                | **create table** 表名( 字段1名  数据类型  属性, ...); |
| 删除数据表                | **drop table** 表名;                                  |
| 显示表结构                | **desc** 表名;                                        |
| 显示建表语句              | **show create table 表名\G;**                         |
| 修改表属性 charset/engine | **alter table 表名 charset=gbk;**                     |
| 修改表名,移动表           | **rename** table 库名.旧表名 to 新库名.新表名;        |



## 3. 数据的基本操作(values)

| 操作     | 语法                                                       |
| -------- | ---------------------------------------------------------- |
| 新增数据 | insert into 表名values \n (字段1)(字段2)....;              |
| 查询数据 | select  字段列表  from  表名 字句;                         |
| 修改数据 | update  表名  set  字段1=字段1新值, 字段2=字段2新值 where; |
| 删除数据 | delete from 表名 where 条件语句;                           |



## 4. 列（字段）类型设置

### 整型类型

| 类型             | 大小    | 有符号（最小值/最大值）                   | 无符号（最小值/最大值） |
| ---------------- | ------- | ----------------------------------------- | ----------------------- |
| **tinyint**(m)   | 1个字节 | -128/127                                  | 0/255                   |
| **smallint**(m)  | 2个字节 | -32768/32767                              | 0/65535                 |
| **mediumint**(m) | 3个字节 | -8388608/8388607                          | 0/16777215              |
| **int**(m)       | 4个字节 | -2147483648/2147483647                    | 0/4294967295            |
| **bigint**(m)    | 8个字节 | -9223372036854775808/ 9223372036854775807 | 0/18446744073709551615  |



### 小数类型

| 类型              | 名称     | 大小                    | 备注                       |
| ----------------- | -------- | ----------------------- | -------------------------- |
| **float**(M, D)   | 单精度数 | 4个字节                 | 默认精度位数为6到7位左右   |
| **double**(M, D)  | 双精度数 | 8个字节                 | 默认精度位数为16到17位左右 |
| **decimal**(M, D) | 定点数   | 变长,大致每9个数4个字节 | M最大为65默认为10；        |

tips:M为总长度，D为小数位长度



### 时间日期型

| 类型          | 显示格式            | 取值                                     | 大小    |
| ------------- | ------------------- | ---------------------------------------- | ------- |
| **DATETIME**  | YYYY-MM-DD HH:MM:SS | 1000-01-01 00:00:00到9999-12-31 23:59:59 | 8个字节 |
| **TIMESTAMP** | YYYY-MM-DD HH:MM:SS | 1970-01-01 00:00:00到2038-01-19 03:14:07 | 4个字节 |
| **DATE**      | YYYY-MM-DD          | 1000-01-01到9999-12-31                   | 3个字节 |
| **TIME**      | HH:MM:SS            | -838:59:59到838:59:59                    | 3个字节 |
| **YEAR**      | YYYY                | 1901到2155                               | 1个字节 |



### 字符串类型

| 类型                                                         | 最大长度                                                     | 备注                                            |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ----------------------------------------------- |
| **char**(M)定长                                              | 定长字符类型：255个字符                                      | Char(M)，M表示字符个数                          |
| **varchar**(M) 变长                                          | 变长字符类型：65535字节，但需要1-2个保存信息，同时由于记录的限制，实际最大值为65532 | 编码不同字符数不同：   Gbk<=32767   Utf8<=21845 |
| **tinyText**            **text**   **mediumText** **longText** | (2^8)    --> 256字节                                                                                     (2^16)-1  --> 65535字节，约64KB                                                                          (2^24)-1 --> 16777215字节，约16M                                                                     (2^32)-1字节 --> 4294967295字节，约4G | 定义时无需指定长度，将会自动计算                |
| **enum**                                                     | 枚举：数字65535                                              | 内部存储是整型；字段只能是某一个值              |
| **set**                                                      | 集合：最多占8个字节，即64个状态值                            |                                                 |



## 5. 列(字段)属性设置

| 属性               | 用法                                                         |
| ------------------ | ------------------------------------------------------------ |
| **null**           | 字段NULL属性的默认情况为可以使用NUL值，建表时可以指定not null设置为不使用NULL值。 |
| **default**        | 为字段设置一个默认值。                                       |
| **primary key**    | 让某个字段变成主键。一个表只能有唯一的一个主键。             |
| **auto_increment** | 设置自动增长。当前如果需要指定某个字段为自动增长属性的话，则这个字段需要是主键 |
| **unique**         | 设置唯一键。如果某个字段被设置成了唯一键，那么，这个字段的值一定不能重复。一个表可以设置多个唯一键。 |
| **comment**        | 指定列描述，列描述其实就是备注内容。                         |



## 6. 修改列(字段)

| 操作                       | 语法                                                         |
| -------------------------- | ------------------------------------------------------------ |
| 向已有的一个表中添加字段   | **alter table** 表名 **add** 新字段名 字段类型 [字段属性列表]; |
| 删除已有表中的某个字段     | **alter table** 表名 **drop** 字段名;                        |
| 改变已有表中某个字段的名字 | **alter table** 表名 **change** 旧字段名 新字段名 新字段类型 [字段属性]; |
| 修改表字段的类型或属性     | **alter table** 表名 **modify** 字段名 字段新类型 [字段新属性列表]; |



## 7. 子语句

| 语法         | 作用                                                         |
| ------------ | ------------------------------------------------------------ |
| **where**    | 用于条件过滤，得到真实的结果。条件语句                       |
| **group by** | 用于分组统计，常与聚合函数一起使用。在最终展示的数据中，不会出现group by后面指定字段值完全相等的情况，即使查询的数据中有相同的值，也只会显示一条。 |
| **having**   | 功能上类似于where语句，负责在结果中再次进行条件过滤。        |
| **order by** | 用来按照指定的字段进行排序的。                               |
| **limit**    | 用来限制查询出来的记录的条数。                               |



## 8. 函数

| 函数           | 作用                                                         |
| -------------- | ------------------------------------------------------------ |
| **count**函数  | 统计指定字段在表中的记录总条数，不统计null值。select count(*) from stu where age>=13; |
| **max**函数    | 统计指定字段数据的最大值。   select max(score) from stu where 1; |
| **min**函数    | 统计指定字段数据的最小值。   select min(score) from stu where 1; |
| **avg**函数    | 统计指定字段所有符合条件数据的平均值。select avg(score) from stu where 1; |
| **sum**函数    | 统计指定字段所有符合条件数据的总和。    select sum(score) from stu where 1; |
| **concat**函数 | 用指定的字符连接指定多个字段的数据。    select concat(name,'-',numb) from stu where 1; |



# MYSQLI扩展

## 1. 连库操作

| 函数                                                         | 描述                  |
| ------------------------------------------------------------ | --------------------- |
| **mysqli_connect**(数据库ip地址,  帐号,  密码,  默认选择的数据库) | 登陆数据库+选择数据库 |
| **mysqli_set_charset**(mysqli连接,  字符集编码)              | 设置字符集操作        |
| **mysqli_select_db**(mysqli连接, 数据库名)                   | 切换数据库            |
| **mysqli_close**(mysqli连接)                                 | 关闭数据库连接操作    |



## 2. 设置(增删改)操作

| 函数                                   | 描述                                          |
| -------------------------------------- | --------------------------------------------- |
| **mysqli_query**(mysqli连接,  sql语句) | 使用MYSQLI实现设置操作增、删、改SQL语句操作。 |



## 3. 查询操作

| 函数                                     | 描述                                         |
| ---------------------------------------- | -------------------------------------------- |
| **mysqli_query**(mysqli连接,  sql语句)   | 执行查询语句                                 |
| **mysqli_fetch_assoc**(结果集)           | 每次执行都只能获得一条数据；                 |
| **mysqli_fetch_row**(结果集)             | 获得的是索引下标类型的数组。                 |
| **mysqli_fetch_all**(结果集[, 数组形态]) | 获得的是关联和索引数组.MYSQLI_BOTH/ASSOC/NUM |



## 4. 辅助操作函数

| 函数                               | 描述                                   |
| ---------------------------------- | -------------------------------------- |
| **mysqli_field_count**(mysqli连接) | 返回最近一次查询语句查询数据中的总列数 |
| **mysqli_num_fields**(结果集)      | 获得查询的结果集中字段的个数           |
| **mysqli_num_rows**(结果集)        | 获得查询结果集中记录的总行数           |
| **mysqli_insert_id**(mysqli连接)   | 获得最近一次新增数据的主键id值         |
| **mysqli_errno**(mysqli连接)       | 获得错误的错误码值                     |
| **mysqli_error**(mysqli连接)       | 获得错误的错误码值对应的错误信息       |



# HTTP协议

## 1. 请求头协议项：

> **host**：当前url中所要请求的服务器的主机名（域名）
> **accept-encoding**：是浏览器发给服务器,声明浏览器支持的压缩编码类型  比如gzip
> **accept_charset**：表示浏览器支持的字符集
> **referer**：表示，此次请求来自哪个网址
> **accept-language**：可以接收的语言类型，cn，en等
> **cookie**：如果之前当前请求的服务器在浏览器端设置了数据（cookie），那么当前浏览器再次请求该服务器的时候，就会把对应的数据带过去
> **user-agent**：用户代理，当前发起请求的浏览器的内核信息
> **accept**：表示浏览器可以接收的数据类型
> **content-length**（post）：只有post提交的时候才会有的请求头，显示的是当前要提交的数据的长度（字节）
> **if-modified-since**（get）：表示，在客户端向服务器请求某个资源文件时，询问此资源文件是否被修改过
> **content-type**（post）：用于定义网络文件的类型和网页的编码，决定浏览器将以什么形式、什么编码读取这个文件



## 2. 响应头协议项：

> **server**：服务器主机信息
>
> **date**：响应时间
>
> **last-modified**：文件最后修改时间（对应请求中：if-modified-since）
>
> **content-length**：响应主体的长度（字节）
>
> **content-type**：响应内容的数据类型：text/html，image/png等
>
> **location**：重定向，浏览器遇到这个选项，就立马跳转（不会解析后面的内容）
>
> **refresh**：重定向（刷新），浏览器遇到这个选项就会准备跳转，刷新一般有时间限制，时间到了才跳转，浏览器会继续向下解析
>
> **content-encodeing**：文件编码格式
>
> **cache-control**：缓存控制，no-cached不要缓存





# GD操作 (画图)

## 1. 创建画布

涉及的函数：

> **imagecreate**(宽，高)                                创建画布
>
> **imagecreatetruecolor**(宽,高)                 创建一个真彩色画布
>
> **imagecreatefromjpeg**(jpeg图片路径)   根据一张已有的jpeg图片创建画布
>
> **imagecreatefromgif**(gif图片路径)         根据一张已有的gif图片创建画布
>
> **imagecreatefrompng**(png图片路径)    根据一张已有的png图片创建画布



## 2. 关闭画布

涉及的函数：

> **imagedestroy**(画布资源)    销毁画布资源



## 3. 图像输出

涉及函数：

> **imagejpeg()** 以jpeg的格式输出图片到浏览器或保存成文件
>
> **imagepng()** 以png的格式输出图片到浏览器或保存成文件
>
> **imagegif()** 以gif的格式输出图片到浏览器或保存成文件



## 4. 画布内容相

涉及的函数：

> **imagecolorallocate**(画布资源,  R色值,  G色值,  B色值)    分配一个颜色
>
> **imagefill**(画布资源,  基点x坐标,  基点y坐标,  颜色)    向画布填充颜色
>
> **imageline**(画布资源,  起点x坐标,  起点y坐标,  终点x坐标,  终点y坐标,  颜色)    画线段操作
>
> **imagerectangle**(画布资源,  对角线起点x坐标,  对角线起点y坐标,  对角线终点x坐标,  对角线终点y坐标,  颜色)    画矩形
>
> **imagearc**(画布资源,  圆心x坐标,  圆心y坐标,  椭圆宽,  椭圆高,  起点角度,  终点角度,  颜色)    画圆弧线段
>
> **imagestring**(画布资源,  字体大小,  文字左上角x坐标,  文字左上角y坐标,  内容,  颜色)    根据系统字体写字
>
> **imagettftext**(画布资源,  字体大小,  角度,  文字左下角x坐标,  文字左下角y坐标,  颜色,  字体路径,  内容)    根据ttf格式的字体写字



## 5. 辅助相关操作

涉及的函数：

> **imagesx**(画布资源)    获得图片的宽度
>
> **imagesy**(画布资源)    获得图片的高度
>
> **getimagesize**(图片路径)    获得图片的宽度和高度等信息



## 6. 其他

> **imagecopymerge(）**            水印图      拷贝并合并图像的一部分
>
> **imagecopyresampled()**       缩略图      重采样拷贝部分图像并调整大小



# PDO (操作数据库)

## 1. 连库操作

| 方法                                            | 描述                             |
| ----------------------------------------------- | -------------------------------- |
| **__construct**(基本参数,数据库账号,数据库密码) | 负责初始化连库基本操作(构造函数) |

连库 例子：

> $dsn = 'mysql:host=localhost;port=3306;charset=utf8;dbname=test';
>
> $pdo = new PDO($dsn,'root','123abc');



## 2.设置操作(增删改)

**【PDO类中】**

| 方法              | 语法                  |
| ----------------- | --------------------- |
| **exec**(SQL语句) | 执行增删改操作SQL语句 |



## 3. 查询操作

**【PDO类中】**

| 方法                | 描述                |
| ------------------- | ------------------- |
| **query** (SQL语句) | 执行查询操作SQL语句 |

**【PDOStratement类中】**

| 方法                 | 描述                                                         |
| -------------------- | ------------------------------------------------------------ |
| **fetch** (解析类型) | 一次解析一条数据；获得的是关联和索引数组. PDO::FETCH_BOTH / ASSOC / NUM |
| **fetchAll**（）     | 一次性解析所有数据                                           |
| **rowCount**（）     | 获取查询出来的数据的总行数                                   |
| **columnCount**（）  | 获取查询出来的数据的总列数                                   |
| **fetchObject**（）  | 一次解析一行数据。数据为对象类型                             |



## 4. 事务

**【PDO类中】** 

| 方法                   | 描述     |
| ---------------------- | -------- |
| **beginTransaction**() | 开启事务 |
| **commit**()           | 提交事务 |
| **rollBack**()         | 回滚事务 |



## 5. 预处理技术

**【PDO类中】**

| 方法                   | 描述           |
| ---------------------- | -------------- |
| **prepare**  (SQL语句) | 生成预处理语句 |

**【PDOStatement类中】**

| 方法                               | 描述           |
| ---------------------------------- | -------------- |
| **bindParam**  (参数序号 ,$参数值) | 绑定参数       |
| **execute** ([参数集合])           | 执行预处理语句 |

预处理方式：

1. 使用序号绑定参数的方式实现一次；

> #1. 准备预处理语句
> $sql = 'insert into cz_user values (null, **?, ?**)';
> $pdostatement = $pdo->**prepare**($sql);
>
> #2. 绑定参数
> $name = '小霸王';
> $pwd = '11aacc';
>
> $pdostatement->bindParam(**1, $name**);//1表示对应着第一个占位符
> $pdostatement->bindParam(**2, $pwd**);//2表示对应着第二个占位符
>
> #3. 执行预处理语句
> $pdostatement->execute();



2. 使用"：字段名"绑定参数的方式实现一次；

> #1. 准备预处理语句
> $sql = 'insert into cz_user values (null, **:name, :pwd**)';//使用“:”+字段名的形式构建占位符
> $pdostatement = $pdo->**prepare**($sql);
>
> #2. 绑定参数
> $name = '小笨笨';
> $pwd = '778899';
>
> $pdostatement->bindParam(**':name', $name**);//绑定参数时需要指定具体的占位符名字
> $pdostatement->bindParam(**':pwd', $pwd**);
>
> #3. 执行预处理语句
> $pdostatement->**execute**();



3. 使用数组绑定参数的方式实现一次；

> #1. 准备预处理语句
> $sql = 'insert into cz_user values (null, **:name, :pwd**)';//使用“:”+字段名的形式构建占位符
> $pdostatement = $pdo->**prepare**($sql);
>
> #2. 绑定参数
> $arr = [
>     ':name' => '小可爱',
>     ':pwd' => '119900',
> ];
>
> #3. 执行预处理语句
> $pdostatement->**execute($arr)**;//直接指定绑定参数的数组作为execute方法的参数即可



## 6. 异常处理

**【PDO类】**

方法：

> **setAttribute**(属性名， 属性值)      设置PDO的模式属性

| 属性名，属性值                            | 处理模式                         |
| ----------------------------------------- | -------------------------------- |
| PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING   | 将错误处理模式设置为警告模式     |
| PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION | 将错误处理模式设置为异常处理模式 |

**【PDOException类】**

| 方法             | 描述                           |
| ---------------- | ------------------------------ |
| **getMessage**() | 获取异常消息内容               |
| **getCode**()    | 获取异常代码；错误的错误码值   |
| **getLine**()    | 获取创建的异常所在文件中的行号 |
| **getFile**()    | 获取创建异常时的程序文件名称   |



------



# SMARTY (模板技术)

**【smarty类】**

| 步骤                                    | 说明                 |
| --------------------------------------- | -------------------- |
| **include** 'xxx/**Smarty.class.php**'; | 引入SMARTY核心类文件 |
| $smarty = **new Smarty**;               | 实例化Smarty类的对象 |
| $smarty->**assign**(变量名,变量值);     | 分配模板变量         |
| $smarty->**display**（模板名);          | 渲染模板             |



## 1. 程序设计(在PHP里)

### 定界符

**【smarty类】**

| 属性                | 说明             |
| ------------------- | ---------------- |
| **left_delimiter**  | 负责控制左定界符 |
| **right_delimiter** | 负责控制右定界符 |



###  目录设置

| 方法                       | 说明         |
| -------------------------- | ------------ |
| **setTemplateDir**(‘目录’) | 修改模板目录 |
| **setCompileDir**(‘目录’)  | 修改编译目录 |



### 常量设置

| 定义                                 | 说明     |
| ------------------------------------ | -------- |
| **define**(**'SMARTY_DIR'**,'路径'); | 定义常量 |





------





## 2. 模板设计(在HTML里)

### 模板注释

> 语法：**{\***注释内容***}** 



### 模板变量

#### 1. 简单模板变量

> 语法：**{$变量名}**         变量名为在PHP中**assign(变量名,变量值)**的变量名

#### 2. 数组模板变量

> 语法：**{$数组名.数组下标}**         数组下标**不加 ' '**

#### 3. 对象模板变量

> 语法：**{$对象名->属性}** 或  **{$对象名->方法名()}**       





### 系统变量

SMARTY系统变量：

| 变量输出方式                   | 说明                     |
| ------------------------------ | ------------------------ |
| **{$smarty.get.变量名称}**     | 直接获取GET参数数据      |
| **{$smarty.post.变量名称}**    | 直接获取POST参数数据     |
| **{$smarty.cookies.变量名称}** | 直接获取COOKIE参数数据   |
| **{$smarty.session.变量名称}** | 直接获取SESSION参数数据  |
| **{$smarty.const.常量名称}**   | 直接获取常量参数数据     |
| **{$smarty.now}**              | 直接获取当前时间的时间戳 |



### 内置函数

| 函数                                              | 说明                               |
| ------------------------------------------------- | ---------------------------------- |
| **foreach**                                       | 遍历数组                           |
| **foreachelse**                                   | 当数组为空或不存在时执行           |
| {**$smarty.foreach.**foreach循环名.**index**}     | 获得当前的索引值                   |
| {**$smarty.foreach.**foreach循环名**.iteration**} | 获得当前遍历的次数                 |
| **include**                                       | 引入其他**模板**文件               |
| **if...elseif...else**                            | 在模板中实现if..elseif..else分支   |
| **literal**                                       | 包裹的部分不会被当成smarty解析。   |
| **ldelim**    **rdelim**                          | 左(右)定界符符号 直接使用 {ldelim} |
| **{date('Y-m-d H:i:s',日期)}**                    | 日期格式为'Y-m-d H:i:s'            |
| **for**                                           | 实现循环                           |



用法：

> **1. foreach**：
>
> {foreach from=$数组名 key=’键名’  item=’变量名’  name=’此数组的别名’}
>        foreach遍历结构体
> {/foreach}
>
> 
>
> **2. foreachelse**：
>
> {foreach ...}
>
> ​	foreach遍历结构体
>
> {foreachelse}
>
> ​	foreachelse做的事
>
> {/foreach}
>
> 
>
> **3. {$smarty.foreach.foreach循环名.index}**：表示获得当前的索引值
>
> 
>
> **4. {$smarty.foreach.foreach循环名.iteration}**    表示获得当前遍历的次数
>
>  
>
> **5.include**:
>
> {include  file=’模板路径’  另外模板的变量名1=变量的值1...另外模板的变量名n=变量的值n}
>
>  
>
> **5. if...elseif...else**:
>
> {if xxx}
>
> {elseif xxx}
>
> {else}
>
> {/if}
>
>  
>
> **6.literal**：
>
> {literal}
>
> ...
>
> {/literal}
>
>  
>
> **7. for :**
>
> {for $i=0 to $变量(或数字) step 数字}              //step表示隔几个数字输出
>
> ​	循环体
>
> {/for}

### 变量调节器

基本语法：

```php
{变量名|名1:参数1:参数2….|名2:参数1:参数2….}
```

| 调节器名         | 说明                                                         |
| ---------------- | ------------------------------------------------------------ |
| **cat**          | 拼接字符串  {$变量1\|cat**:**$变量2}                         |
| **date_format**  | 将时间戳格式化为年月日时间日期格式；{时间戳\|date_format:'%Y-%m-%d %H:%M:%S'} |
| **default**      | 指定默认值  {$变量1\|default:默认值内容}                     |
| **lower  upper** | 字母转换   {字符串\|lower/upper}                             |
| **escape**       | 将变量中的html标签当成普通字符串输出。{字符串名\|escape}  被包在字符串里 |
| **nl2br**        | 将文件的回车换行转换为html的\<br/>标签 {字符串名\|nl2br}  在**PHP**中用：$str1 ="请看接下来另起一行\r\n哈哈，我成功到了第二行"; |
| **strip_tags**   | 将html标签字符直接去除 {字符串名\|**strip_tags**}  在**PHP**中用 被包在字符串里 |



# MVC (编程方式)

**M** --> Model

**V** --> View

**C** --> Controller



**Model表示模型层**，负责数据业务规则的处理，凡是跟数据操作有关的内容都属于数据逻辑，只要与SQL指令有关，那么都属于模型（数据逻辑）；

 

**View表示视图层**，负责展示数据，其实就是我们看到的页面，也就是模板template（模板），用来承载数据的容器，通常是HTML文件（显示[HTML]，美化[CSS]和效果[JavaScript]）；

 

**Controller表示控制器**，也叫作模块（Module），负责接受用户请求，并调用相应的模型和视图处理和展示业务，是用来与用户直接接触的脚本代码（浏览器直接提交给PHP的脚本对象），判断用户操作的逻辑性，在需要的时候，他可以调用模型操作数据，也可以调用视图展示页面。



![1536015759201](D:\PHP\note\二\mn_img\img_d22\5.jpg)



![1536028681032](D:\PHP\note\二\mn_img\img_d22\6.jpg)





# TP5框架开发

目录结构：

```
project  应用部署目录

├─application           应用目录（可设置）
│  ├─common             公共模块目录（可更改）
│  ├─index              模块目录(可更改)
│  │  ├─config.php      模块配置文件
│  │  ├─common.php      模块函数文件
│  │  ├─controller      控制器目录
│  │  ├─model           模型目录
│  │  ├─view            视图目录
│  │  └─ ...            更多类库目录
│  ├─command.php        命令行工具配置文件
│  ├─common.php         应用公共（函数）文件
│  ├─config.php         应用（公共）配置文件
│  ├─database.php       数据库配置文件
│  ├─tags.php           应用行为扩展定义文件
│  └─route.php          路由配置文件
├─extend                扩展类库目录（可定义）
├─public                WEB 部署目录（对外访问目录）
│  ├─static             静态资源存放目录(css,js,image)
│  ├─index.php          应用入口文件
│  ├─router.php         快速测试文件
│  └─.htaccess          用于 apache 的重写
├─runtime               应用的运行时目录（可写，可设置）
├─vendor                第三方类库目录（Composer）
├─thinkphp              框架系统目录
│  ├─lang               语言包目录
│  ├─library            框架核心类库目录
│  │  ├─think           Think 类库包目录
│  │  └─traits          系统 Traits 目录
│  ├─tpl                系统模板目录
│  ├─.htaccess          用于 apache 的重写
│  ├─.travis.yml        CI 定义文件
│  ├─base.php           基础定义文件
│  ├─composer.json      composer 定义文件
│  ├─console.php        控制台入口文件
│  ├─convention.php     惯例配置文件
│  ├─helper.php         助手函数文件（可选）
│  ├─LICENSE.txt        授权说明文件
│  ├─phpunit.xml        单元测试配置文件
│  ├─README.md          README 文件
│  └─start.php          框架引导文件
├─build.php             自动生成定义文件（参考）
├─composer.json         composer 定义文件
├─LICENSE.txt           授权说明文件
├─README.md             README 文件
├─think                 命令行入口文件

```



## 前期处理

### 配置默认项

进入框架的应用配置文件application/config.php 

#### 应用设置

![9](/images/9.jpg)

![12](/images/12.jpg)

![10](/images/10.jpg)



#### 模块设置

![13](/images/13.jpg)

#### URL设置

![11](/images/11.jpg)

#### 自定义配置

![14](/images/14.jpg)



------



### 配置数据库

在application/database.php文件中配置数据库相应参数 

![6](/images/6.jpg)

![7](/images/7.jpg)

### 配置路由

进入public/.htaccess

![8](/images/8.jpg)



### 创建目录

![15](/images/15.jpg)



### 设置路由

到application/route.php

![16](/images/16.jpg)



### 资源管理

把资源放到public/static/admin目录

![18](/images/18.jpg)

修改资源路径

![17](/images/17.jpg)





## 登录登出处理

### 登录处理

- 引用User model 并创建PublicController/login方法

  ![27](/images/27.jpg)

- 在model/User.php中加入checkUser()方法

  ![28](/images/28.jpg)



### 退出处理

按退出键退出账号方法：

- 清除session

- 重定向登录页

  ![19](/images/19.jpg)

  

- 设置公共区域防翻墙 创建CommonController

  ![20](/images/20.jpg)

  

- 让需要登录后才能进入的页面继承CommonController




### 权限防翻墙

- 找到PublicController/login方法 检测入库数据的方法checkUser()

- 创建私有方法_initAuth 把拥有的权限写入session中

  ![29](/images/29.jpg)

- 进入left.html模板 (控制面板) 循环输出菜单功能

  ![30](/images/30.jpg)

- 进入CommonController

- 





## 相关操作处理

### 无限极分类

- 实例化模型并调用getSonsXXX()方法

  ![21](/images/21.jpg)

- 在该**模板**中创建方法getSonsXXX() 并进行无限极分类

  ![21](/images/21.jpg)

  

  



###  处理数据子级关系

![25](/images/25.jpg)

![26](/images/26.jpg)



### 特殊报错

![23](/images/23.jpg)

在公共文件application/common.php中

![24](/images/24.jpg)





## 数据库操作

### 连表操作

![32](/images/32.jpg)

### 入库前钩子

入库前实现某一属性值的生成

![39](/images/39.jpg)



## 特殊插件

### 富文本编辑器

- 在public/static/plugins/粘贴富文本编辑器文件ueditor

   ![33](/images/33.jpg)

- 打开富文本编辑器的源代码 在需要导入富文本编辑器的html中粘贴要导入的代码

  ![34](/images/34.jpg)

- 修改路径

  ![35](/images/35.jpg)

- 实例化编辑器

   ![36](/images/36.jpg)

- 修改富文本编辑器的配置(宽高)

  在ueditor/ueditor.config.js中进行修改

  ![37](/images/37.jpg)

- 加参数防止缓存

   ![38](/images/38.jpg)



## 多图片上传

- 上传多图片的要求，为了满足商城前台商品详情页图片画廊的最佳显示效果

![40](/images/40.jpg)

​	建议原图上传800*800，甚至更大，生成两种缩略图

​	中图缩略图：350*350，缩略图生成比例为2，等比补白填充

​	小图缩略图：50*50

- 字段保存建议使用text格式用json保存图片

- 把多文件的信息存储在img[ ]中![41](/images/41.jpg)

- 在控制器中 在验证成功后 做文件上传 获取img[ ] 

  ![43](/images/43.jpg)

- 创建文件上传方法

   ![42](/images/42.jpg)

- 原图上传成功后 进行缩略图上传处理（中小图）

   ![44](/images/44.jpg)

- 回到添加方法

![45](/images/45.jpg)



## 短信验证

- 登录短信验证平台网站并登录，如：https://www.yuntongxun.com/

- 进入平台测试号码，添加用来测试的号码 

  ![46](/images/46.jpg)

- 点击进入开发文档 —> 短信开发手册 —> demo示例

- 下载SMS PHP DEMO并解压

  ![47](/images/47.jpg)

- 复制CCPRestSmsSDK.php 到商城项目extend文件夹里的新建文件夹sendSms中

  ![48](/images/48.jpg)

- 先暂时把SendTemplateSMS.php文件复制粘贴到入口文件的目录中，方便调试

  ![49](/images/49.jpg)

- 修改里面的内容

  ![50](/images/50.jpg)

- 修改该文件底部为方法的调用

  ![51](/images/51.jpg)

- 复制sendTemplateSMS.php的内容 按一定方式移动到application/common.php公共文件内并进行修改，

  ![52](/images/52.jpg)

  ![53](/images/53.jpg)

-  删除SendTemplateSMS.php，进入登录/注册界面

  调用方法并测试

  ![54](/images/54.jpg)

  ![55](/images/55.jpg)

- 添加ajax验证

  ![56](/images/56.jpg)

  ![57](/images/57.jpg)

- 防止频繁发送（设置倒计时60s）

  ![58](/images/58.jpg)

  ![59](/images/59.jpg)



## 邮箱技术密码找回

- 登录163账号，找到【设置】->【pop3/SMTP/IMAP选项】

  ![69](/images/69.jpg)

- 开通smtp服务

  ![70](/images/70.jpg)

- 设置客户端授权密码 

  ![71](/images/71.jpg)

- 把插件中phpemail的文件改名为sendEmail并放入extend目录中

  ![72](/images/72.jpg) 

- 修改demo.php的内容

  ![73](/images/73.jpg) 

- 封装发送邮件方法，进入application/common.php创建方法sendEmail，复制demo内容到方法中，并修改

  ![74](/images/74.jpg) 

  调用形式：

  ```php
  sendEmail(['691661505@qq.com','b691661505@163.com','找回密码呀','找呀找呀找密码']);
  ```

- 找到登录界面，加上跳转链接

  ![75](/images/75.jpg) 

- 添加forgetPassword方法，添加路由，渲染模板

  ![76](/images/76.jpg) 

- 给发送邮件按钮(id="sendemail")绑定ajax 并创建home/public/sendEmail方法 

  ![77](/images/77.jpg) 

  ![78](/images/78.jpg)

  href改为：

  ```php
  $href = request()->domain().'/index.php/home/public/change/'.$member_id;
  ```

- 添加方法home/public/change，添加路由，模板

  带参数路由绑定

  ![79](/images/79.jpg) 

- 编写change方法，进入application/congif添加邮箱加密盐，新增参数

   ![80](/images/80.jpg) 

  ![82](/images/82.jpg) 

  ![79](/images/79.jpg)

  ![81](/images/81.jpg) 



## 查询订单物流

接口地址：[http://www.kuaidi100.com/applyurl?key={$key}&com={$com}&nu={$nu}&show=0](http://www.kuaidi100.com/applyurl?key=%7b$key%7d&com=%7b$com%7d&nu=%7b$nu%7d&show=0) 

参数说明：

key:即密钥，使用9d37bc6b0a41e6fe即可。

com:物流公司，如下常见的几个：

```html
<option value=''>请选择物流公司</option>
<option value="yuantong">圆通</option>
<option value="shentong">申通</option>
<option value="zhongtong">中通</option>
<option value="yunda">韵达</option>
<option value="shunfeng">顺丰</option>
```

返回的是一个连接地址，该地址里面是已经渲染好的渲染的物流信息

![21](/images/21.png)

可以使用layer 的 iframe引入







## 工具网站

### Composer第三方库

#### 简述

Composer 是 PHP 的一个包依赖管理工具。能够帮助我们安装我们项目所需要的依赖包。

#### 安装composer

- 第一种方式：

去composer官网(  <https://getcomposer.org/download/>   )下载Composer-setup.exe进行安装，由于此软件安装需要联网且服务器在国外安装很难成功，所以这里推荐使用下面第二种方式进行安装。

![10](/images/10.png)

- [推荐]第二种方式

  去官网https://getcomposer.org/download 下载composer.phar文件。

![11](/images/11.png)

找到并进入 PHP 的安装目录,将下载的composer.phar 复制到 PHP 的安装目录下面，也就是和 php.exe 在同一级目录。注意自己使用哪个php版本。 

![84](/images/84.jpg)

在 PHP 安装目录（D:\phpStudy\php\php-5.6.27-nts）下新建一个 composer.bat 文件，并将下列代码保存到此文件中。

```
@php "%~dp0composer.phar" %*
```

至此composer的安装就完成。

进入对应php版本目录D:\phpStudy\php\php-5.6.27-nts中输入composer指令，出现如下提示代表安装成功：

![85](/images/85.jpg)

为了可以全局（任意位置）访问composer，可以把php.exe的所在目录（D:\phpStudy\php\php-5.6.27-nts）定义在环境变量path选项中。

设置好后输入php  -v即可看到php版本号。且cmd中任意位置输入composer指令都可出现效果

**注**：需要打开php.ini文件开启openssl扩展。因为后面composer的相关命令需要使用ssl协议进行下载包。

#### 配置composer为国内镜像提高速度

配置国内镜像：https://pkg.phpcomposer.com/

输入命令 

全局配置：composer config -g repo.packagist composer https://packagist.phpcomposer.com

![12](/images/12.png)

局部配置：若只想在当前项目中有效，把上面的命令去掉 -g 即可。

#### composer相关命令

- 查看所有的composer可以使用的命令

  ```
  composer list
  ```

- 查看某个命令的使用

  ```
  composer  require --help
  ```

-  composer下载thinkphp框架： 

  ```
  composer create-project topthink/think  shop
  ```

**注：**其中shop代表框架存放的目录，会自动生成，未指定则默认放在think目录

- 安装一些第三方包 包地址：<https://packagist.org/> 

  ```
  composer require 厂商/包名=版本号
  ```

**注：**若不指定版本号默认安装最新版本

如安装tp5验证码1.0.3 版本：composer require topthink/think-captcha=1.0.3

如安装tp5验证码1.0的最高版本：composer require topthink/think-captcha=1.0.*

包名所有的版本：https://packagist.org/packages/topthink/think-captcha 

设置版本号：

<https://segmentfault.com/a/1190000005898222> 

<https://docs.phpcomposer.com/01-basic-usage.html#composer.json-Project-Setup> 

- 安装composer.json指定的依赖包：

  ```
  composer install 
  ```

  composer.json文件说明：

https://docs.phpcomposer.com/01-basic-usage.html#composer.json-Project-Setup

-  删除指定的包：

```
composer  remove  topthink/think-captcha 
```

- 删除指定的包：

```
composer  search  topthink/think-captcha 
```

- 安装composer.json指定的依赖包：

```
composer install 
```

​	会自动安装在composer.json文件中所指定的各种依赖包，执行成功后会多处一个composer.lock的锁文件。后面需要更新依赖库只能通过composer update实现安装。

composer.json文件架构详解：<https://docs.phpcomposer.com/04-schema.html> 

- 更新依赖包

```
composer update
```

若修改composer.json中require指定的依赖包，且存在composer.lock文件，则只能通过

composer update进行更新。

- 取消镜像：

```
composer config -g --unset repos.packagist
```

- 查看当前composer版本

```
composer -v
```

- 升级composer版本：

```
composer selfupdate
```

#### 使用composer安装tp5验证码

手册位置：杂项-->验证码

 

**步骤1**：切换到项目根目录即composer.json 所在的目录，输入指令 composer require topthink/think-captcha=1.0.*进行安装。

![13](/images/13.png)

注：不要安装2.0以上版本，此版本需要tp5是5.1版本，我们tp5版本是5.0版本

 

默认下载的tp5框架已经帮我们下载好了验证码，不用composer安装可直接使用即可。

![14](/images/14.png)

#### 完成登录的验证码功能

手册位置：杂项-->验证码

**步骤1**：找到login.html模板，设置img的src为{:captcha_src()}

**步骤2**：设置验证码的配置 =

**步骤3**：单击验证码，更换验证码 

**步骤4**：单击登录按钮，在login方法中判断验证码是否输入正确 

页面输入错误，打回来时候。让验证码自执行单击事件



### Layui

http://layer.layui.com/ ：弹出框等。

使用：

- 点击选项

![60](/images/60.jpg)

- 复制代码 覆盖到之前显示的地方 如：alert

  ![61](/images/61.jpg)

- 找到layer-v3.0.1文件 把里面的layer文件拖到public/static/plugins

  ![62](/images/62.jpg)

- 在当前html模板引入layer/layer.js

  ![63](/images/63.jpg)

  

### 聚合网站

https://www.juhe.cn：提供各种API接口

案例：调用聚合数据的API接口，实现获取手机的归属地查询（查询快递、发送短信）

① 找到对应的API接口

<https://www.juhe.cn/docs/api/id/11> 手机号码归属地查询

② 看请求的url地址

![65](/images/65.jpg)



由以上代码可知，请求的URL地址需要传递2个参数，phone与key，请求方式为url。

③ 在PHP中调用请求的url地址

如果是get请求，使用file_get_contents(url)模拟get请求

如果是post请求，使用curl进行模拟

index.html：

```html
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script type="text/javascript" src='./jquery.js'></script>
</head>
<body>
	<form action="./deal.php" method="post">
		手机号码：<input type="text" name="phone">
		<input type="submit" name="submit" value="查询归属地">
	</form>
</body>
</html>
```

deal.php：

![66](/images/66.jpg)





### JQ插件网站

打开网站http://www.jq22.com/

案例：获取加载图标

搜索想要的图标 打开

![67](/images/67.jpg)



### 支付宝

- 进入支付宝开发者中心

   <https://openhome.alipay.com/platform/developerIndex.htm> 

   注意：必须要先成为自研服务者 

- 进入沙箱环境

  ![15](/images/15.png)

- 下载支付宝支付的开发包SDK&Demo 

  下载地址：<https://docs.open.alipay.com/270/106291> 

  下载回来的压缩包如下：

  ![16](/images/16.png)

  解压下来如下所示： 

  ![17](/images/17.png)

  - aop：包含**支付宝核心的支付文**件。

  - lotusphp_runtime： 这是一个国外的PHP框架，这里是支付宝默认使用的。

  - pagepay：具体的实现支付接口的代码文件

  - config.php：配置文件，填写应用配置APPID、应用密钥、支付宝、支付网关的配置

  - notify_url.php：支付成功后支付宝以post方式异步通知地址的demo文件，获取支付结果的参数

  - return_url.php：支付成功后支付宝以get方式同步通知地址的demo文件，获取支付结果的参数注：支付宝接口对我们的PHP版本有要求，必须在PHP5.5以上， 

  注：支付宝接口对我们的PHP版本有要求，必须在PHP5.5以上，且需要开启对应php版本的php.ini配置文件中的pnp_openssl.dll扩展，去掉前面的分号，并重启apache服务器

- 引入支付宝到项目中 ,把支付宝下载下来的SDK文件复制到目录/extend下面 ，改名为alipay 

  ![86](/images/86.jpg)

- 进行支付前的相关参数配置，进入alipay/config.php

  ![87](/images/87.jpg)

  - app_id:可以从支付宝的沙箱应用中获取到
  - 支付宝网关(gatewayUrl)

  正式环境：[https://openapi.alipay.com/gateway.do](https://openapi.alipaydev.com/gateway.do)

  沙箱环境：<https://openapi.alipaydev.com/gateway.do>

  注意：以后去公司做支付宝支付时，上线要使用正式环境的支付网关

  - 应用私钥（merchant_private_key）

    进入https://docs.open.alipay.com/291/105971

    ![88](/images/88.jpg)

    解压后，以管理员身份运行”RSA签名验证工具.bat“(或打开黑窗口进入 D:\PHP\插件\支付宝\secret_key_tools_RSA_win\RSA签名验签工具windows_V1.4 输入命令：

    `jre\bin\java.exe -Dfile.encoding=UTF-8 -jar openssl_tools.jar`)，弹出窗口

    ![18](/images/18.png)

    选择选项，生成私钥，把商户应用私钥复制粘贴到配置项merchant_private_key中

  - 支付宝公钥（alipay_public_key）

    复制上图的应用公钥，进入沙箱环境，点击查看应用公钥

    ![19](/images/19.png)

    经过上传生成的公钥复制粘贴到配置项alipay_public_key中

  - 异步通知地址（notify_url）和同步跳转（return_url）

    ![89](/images/89.jpg)

- 进入控制器，创建方法

  ![90](/images/90.jpg) 

  在支付处调用该方法

  ![91](/images/91.jpg) 

  异步通知地址

  ![92](/images/92.jpg) 

- 修改pagepay/pagepay.php支付文件的几个变量

  ![20](/images/20.png) 




